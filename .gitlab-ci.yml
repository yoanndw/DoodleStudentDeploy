default:
  image: docker:24.0.5
  services:
    - docker:24.0.5-dind
  before_script:
    - docker info

variables:
  DOCKER_TLS_CERTDIR: ""

build-api:
  stage: build
  script:
    - cd api
    - echo $DOCKER_PASSWORD | docker login --username ydewilde --password-stdin
    - docker build . -t ydewilde/doodleapi
    - docker image push ydewilde/doodleapi

build-front:
  stage: build
  script:
    - cd front
    - echo $DOCKER_PASSWORD | docker login --username ydewilde --password-stdin
    - docker build . -t ydewilde/doodlefront 
    - docker image push ydewilde/doodlefront

# deploy-prod:
#   stage: deploy
#   script:
#     - echo "This job deploys something from the $CI_COMMIT_BRANCH branch."
#   environment: production